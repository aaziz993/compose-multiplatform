plugins:
  # publishing
  publishing:
    repositories:
      - mavenLocal:
          url: build/m2
      - maven:
          name: GithubPackages
          url: https://maven.pkg.github.com/aaziz993
          credentials:
            username: aaziz993
            password: $envOrLocal.github.password
      - maven:
          name: SpacePackages
          url: https://maven.pkg.jetbrains.space/aaziz93/p/aaziz-93/maven
          credentials:
            username: aaziz93
            password: $envOrLocal.jetbrains.space.password
      - maven:
          name: Sonatype
          url: https://maven.pkg.jetbrains.space/aaziz93/p/aaziz-93/maven
          credentials:
            username: aaziz93
            password: $envOrLocal.jetbrains.space.password
    publications:
      - maven: { }
      - maven:
          name: '' # apply to all above created maven publications by specifying empty name
          pom:
#            inceptionYear: '2025' # Populated from inceptionYear.
#            licenses: # Populated from license.
#              - name: Apache License, Version 2.0
#                url: https://www.apache.org/licenses/LICENSE-2.0.txt
#                distribution: repo
#                comments: A business-friendly OSS license.
            issueManagement:
              system: GitHub Issues
              url: https://github.com/aaziz993/compose-multiplatform/issues
#            developers: # Populated from developer.
#              - id: aaziz993
#                name: Aziz Atoev
#                email: a.atoev93@gmail.com
#                organization: AITech
#                organizationUrl: https://github.com/aaziz993
            scm:
              url: https://github.com/aaziz993/compose-multiplatform
              connection: scm:git:git://github.com:aaziz993/compose-multiplatform.git
              developerConnection: scm:git:ssh://github.com:aaziz993/compose-multiplatform.git
              tag: HEAD

  # signing
  signing:
    useGpgCmd: true
    useInMemoryPgpKeys:
      defaultSecretKey: $envOrLocal.signing.gnupg.key
      defaultPassword: $envOrLocal.signing.gnupg.key.passphrase
    signPublications: [ '' ] # sign all publications by specifying empty name
    # register generateSigningGPG task
    generateGpg:
      keyType: RSA
      keyLength: 4096
      subkeyType: RSA
      subkeyLength: 4096
#      nameReal: Aziz Atoev # Populated from developer.name
      nameComment: Maven publish signing key
#      nameEmail: a.atoev93@gmail.com # Populated from developer.email
      expireDate: 0
      passphrase: $envOrLocal.signing.gnupg.key.passphrase

tasks:
  - Task:
      name: publish
      dependOn: publishToMavenLocal
