package klib.data.location.country

public class Country private constructor(
    public val code: CountryCode,
    private val codeIso3116Alpha3: String,
    public val numericCode: Int,
) {

    public fun code(format: CountryCode.Format): String =
        when (format) {
            CountryCode.Format.ISO_3166_ALPHA_2 -> code.toString()
            CountryCode.Format.ISO_3166_ALPHA_3 -> codeIso3116Alpha3
        }

    override fun toString(): String =
        code.toString()

    public companion object {

        // https://www.iso.org/obp/ui/
        public val all: Set<Country> = hashSetOf(
            make(code = "AD", codeIso3116Alpha3 = "AND", numericCode = 20),
            make(code = "AE", codeIso3116Alpha3 = "ARE", numericCode = 784),
            make(code = "AF", codeIso3116Alpha3 = "AFG", numericCode = 4),
            make(code = "AG", codeIso3116Alpha3 = "ATG", numericCode = 28),
            make(code = "AI", codeIso3116Alpha3 = "AIA", numericCode = 660),
            make(code = "AL", codeIso3116Alpha3 = "ALB", numericCode = 8),
            make(code = "AM", codeIso3116Alpha3 = "ARM", numericCode = 51),
            make(code = "AO", codeIso3116Alpha3 = "AGO", numericCode = 24),
            make(code = "AQ", codeIso3116Alpha3 = "ATA", numericCode = 10),
            make(code = "AR", codeIso3116Alpha3 = "ARG", numericCode = 32),
            make(code = "AS", codeIso3116Alpha3 = "ASM", numericCode = 16),
            make(code = "AT", codeIso3116Alpha3 = "AUT", numericCode = 40),
            make(code = "AU", codeIso3116Alpha3 = "AUS", numericCode = 36),
            make(code = "AW", codeIso3116Alpha3 = "ABW", numericCode = 533),
            make(code = "AX", codeIso3116Alpha3 = "ALA", numericCode = 248),
            make(code = "AZ", codeIso3116Alpha3 = "AZE", numericCode = 31),
            make(code = "BA", codeIso3116Alpha3 = "BIH", numericCode = 70),
            make(code = "BB", codeIso3116Alpha3 = "BRB", numericCode = 52),
            make(code = "BD", codeIso3116Alpha3 = "BGD", numericCode = 50),
            make(code = "BE", codeIso3116Alpha3 = "BEL", numericCode = 56),
            make(code = "BF", codeIso3116Alpha3 = "BFA", numericCode = 854),
            make(code = "BG", codeIso3116Alpha3 = "BGR", numericCode = 100),
            make(code = "BH", codeIso3116Alpha3 = "BHR", numericCode = 48),
            make(code = "BI", codeIso3116Alpha3 = "BDI", numericCode = 108),
            make(code = "BJ", codeIso3116Alpha3 = "BEN", numericCode = 204),
            make(code = "BL", codeIso3116Alpha3 = "BLM", numericCode = 652),
            make(code = "BM", codeIso3116Alpha3 = "BMU", numericCode = 60),
            make(code = "BN", codeIso3116Alpha3 = "BRN", numericCode = 96),
            make(code = "BO", codeIso3116Alpha3 = "BOL", numericCode = 68),
            make(code = "BQ", codeIso3116Alpha3 = "BES", numericCode = 535),
            make(code = "BR", codeIso3116Alpha3 = "BRA", numericCode = 76),
            make(code = "BS", codeIso3116Alpha3 = "BHS", numericCode = 44),
            make(code = "BT", codeIso3116Alpha3 = "BTN", numericCode = 64),
            make(code = "BV", codeIso3116Alpha3 = "BVT", numericCode = 74),
            make(code = "BW", codeIso3116Alpha3 = "BWA", numericCode = 72),
            make(code = "BY", codeIso3116Alpha3 = "BLR", numericCode = 112),
            make(code = "BZ", codeIso3116Alpha3 = "BLZ", numericCode = 84),
            make(code = "CA", codeIso3116Alpha3 = "CAN", numericCode = 124),
            make(code = "CC", codeIso3116Alpha3 = "CCK", numericCode = 166),
            make(code = "CD", codeIso3116Alpha3 = "COD", numericCode = 180),
            make(code = "CF", codeIso3116Alpha3 = "CAF", numericCode = 140),
            make(code = "CG", codeIso3116Alpha3 = "COG", numericCode = 178),
            make(code = "CH", codeIso3116Alpha3 = "CHE", numericCode = 756),
            make(code = "CI", codeIso3116Alpha3 = "CIV", numericCode = 384),
            make(code = "CK", codeIso3116Alpha3 = "COK", numericCode = 184),
            make(code = "CL", codeIso3116Alpha3 = "CHL", numericCode = 152),
            make(code = "CM", codeIso3116Alpha3 = "CMR", numericCode = 120),
            make(code = "CN", codeIso3116Alpha3 = "CHN", numericCode = 156),
            make(code = "CO", codeIso3116Alpha3 = "COL", numericCode = 170),
            make(code = "CR", codeIso3116Alpha3 = "CRI", numericCode = 188),
            make(code = "CU", codeIso3116Alpha3 = "CUB", numericCode = 192),
            make(code = "CV", codeIso3116Alpha3 = "CPV", numericCode = 132),
            make(code = "CW", codeIso3116Alpha3 = "CUW", numericCode = 531),
            make(code = "CX", codeIso3116Alpha3 = "CXR", numericCode = 162),
            make(code = "CY", codeIso3116Alpha3 = "CYP", numericCode = 196),
            make(code = "CZ", codeIso3116Alpha3 = "CZE", numericCode = 203),
            make(code = "DE", codeIso3116Alpha3 = "DEU", numericCode = 276),
            make(code = "DJ", codeIso3116Alpha3 = "DJI", numericCode = 262),
            make(code = "DK", codeIso3116Alpha3 = "DNK", numericCode = 208),
            make(code = "DM", codeIso3116Alpha3 = "DMA", numericCode = 212),
            make(code = "DO", codeIso3116Alpha3 = "DOM", numericCode = 214),
            make(code = "DZ", codeIso3116Alpha3 = "DZA", numericCode = 12),
            make(code = "EC", codeIso3116Alpha3 = "ECU", numericCode = 218),
            make(code = "EE", codeIso3116Alpha3 = "EST", numericCode = 233),
            make(code = "EG", codeIso3116Alpha3 = "EGY", numericCode = 818),
            make(code = "EH", codeIso3116Alpha3 = "ESH", numericCode = 732),
            make(code = "ER", codeIso3116Alpha3 = "ERI", numericCode = 232),
            make(code = "ES", codeIso3116Alpha3 = "ESP", numericCode = 724),
            make(code = "ET", codeIso3116Alpha3 = "ETH", numericCode = 231),
            make(code = "FI", codeIso3116Alpha3 = "FIN", numericCode = 246),
            make(code = "FJ", codeIso3116Alpha3 = "FJI", numericCode = 242),
            make(code = "FK", codeIso3116Alpha3 = "FLK", numericCode = 238),
            make(code = "FM", codeIso3116Alpha3 = "FSM", numericCode = 583),
            make(code = "FO", codeIso3116Alpha3 = "FRO", numericCode = 234),
            make(code = "FR", codeIso3116Alpha3 = "FRA", numericCode = 250),
            make(code = "GA", codeIso3116Alpha3 = "GAB", numericCode = 266),
            make(code = "GB", codeIso3116Alpha3 = "GBR", numericCode = 826),
            make(code = "GD", codeIso3116Alpha3 = "GRD", numericCode = 308),
            make(code = "GE", codeIso3116Alpha3 = "GEO", numericCode = 268),
            make(code = "GF", codeIso3116Alpha3 = "GUF", numericCode = 254),
            make(code = "GG", codeIso3116Alpha3 = "GGY", numericCode = 831),
            make(code = "GH", codeIso3116Alpha3 = "GHA", numericCode = 288),
            make(code = "GI", codeIso3116Alpha3 = "GIB", numericCode = 292),
            make(code = "GL", codeIso3116Alpha3 = "GRL", numericCode = 304),
            make(code = "GM", codeIso3116Alpha3 = "GMB", numericCode = 270),
            make(code = "GN", codeIso3116Alpha3 = "GIN", numericCode = 324),
            make(code = "GP", codeIso3116Alpha3 = "GLP", numericCode = 312),
            make(code = "GQ", codeIso3116Alpha3 = "GNQ", numericCode = 226),
            make(code = "GR", codeIso3116Alpha3 = "GRC", numericCode = 300),
            make(code = "GS", codeIso3116Alpha3 = "SGS", numericCode = 239),
            make(code = "GT", codeIso3116Alpha3 = "GTM", numericCode = 320),
            make(code = "GU", codeIso3116Alpha3 = "GUM", numericCode = 316),
            make(code = "GW", codeIso3116Alpha3 = "GNB", numericCode = 624),
            make(code = "GY", codeIso3116Alpha3 = "GUY", numericCode = 328),
            make(code = "HK", codeIso3116Alpha3 = "HKG", numericCode = 344),
            make(code = "HM", codeIso3116Alpha3 = "HMD", numericCode = 334),
            make(code = "HN", codeIso3116Alpha3 = "HND", numericCode = 340),
            make(code = "HR", codeIso3116Alpha3 = "HRV", numericCode = 191),
            make(code = "HT", codeIso3116Alpha3 = "HTI", numericCode = 332),
            make(code = "HU", codeIso3116Alpha3 = "HUN", numericCode = 348),
            make(code = "ID", codeIso3116Alpha3 = "IDN", numericCode = 360),
            make(code = "IE", codeIso3116Alpha3 = "IRL", numericCode = 372),
            make(code = "IL", codeIso3116Alpha3 = "ISR", numericCode = 376),
            make(code = "IM", codeIso3116Alpha3 = "IMN", numericCode = 833),
            make(code = "IN", codeIso3116Alpha3 = "IND", numericCode = 356),
            make(code = "IO", codeIso3116Alpha3 = "IOT", numericCode = 86),
            make(code = "IQ", codeIso3116Alpha3 = "IRQ", numericCode = 368),
            make(code = "IR", codeIso3116Alpha3 = "IRN", numericCode = 364),
            make(code = "IS", codeIso3116Alpha3 = "ISL", numericCode = 352),
            make(code = "IT", codeIso3116Alpha3 = "ITA", numericCode = 380),
            make(code = "JE", codeIso3116Alpha3 = "JEY", numericCode = 832),
            make(code = "JM", codeIso3116Alpha3 = "JAM", numericCode = 388),
            make(code = "JO", codeIso3116Alpha3 = "JOR", numericCode = 400),
            make(code = "JP", codeIso3116Alpha3 = "JPN", numericCode = 392),
            make(code = "KE", codeIso3116Alpha3 = "KEN", numericCode = 404),
            make(code = "KG", codeIso3116Alpha3 = "KGZ", numericCode = 417),
            make(code = "KH", codeIso3116Alpha3 = "KHM", numericCode = 116),
            make(code = "KI", codeIso3116Alpha3 = "KIR", numericCode = 296),
            make(code = "KM", codeIso3116Alpha3 = "COM", numericCode = 174),
            make(code = "KN", codeIso3116Alpha3 = "KNA", numericCode = 659),
            make(code = "KP", codeIso3116Alpha3 = "PRK", numericCode = 408),
            make(code = "KR", codeIso3116Alpha3 = "KOR", numericCode = 410),
            make(code = "KW", codeIso3116Alpha3 = "KWT", numericCode = 414),
            make(code = "KY", codeIso3116Alpha3 = "CYM", numericCode = 136),
            make(code = "KZ", codeIso3116Alpha3 = "KAZ", numericCode = 398),
            make(code = "LA", codeIso3116Alpha3 = "LAO", numericCode = 418),
            make(code = "LB", codeIso3116Alpha3 = "LBN", numericCode = 422),
            make(code = "LC", codeIso3116Alpha3 = "LCA", numericCode = 662),
            make(code = "LI", codeIso3116Alpha3 = "LIE", numericCode = 438),
            make(code = "LK", codeIso3116Alpha3 = "LKA", numericCode = 144),
            make(code = "LR", codeIso3116Alpha3 = "LBR", numericCode = 430),
            make(code = "LS", codeIso3116Alpha3 = "LSO", numericCode = 426),
            make(code = "LT", codeIso3116Alpha3 = "LTU", numericCode = 440),
            make(code = "LU", codeIso3116Alpha3 = "LUX", numericCode = 442),
            make(code = "LV", codeIso3116Alpha3 = "LVA", numericCode = 428),
            make(code = "LY", codeIso3116Alpha3 = "LBY", numericCode = 434),
            make(code = "MA", codeIso3116Alpha3 = "MAR", numericCode = 504),
            make(code = "MC", codeIso3116Alpha3 = "MCO", numericCode = 492),
            make(code = "MD", codeIso3116Alpha3 = "MDA", numericCode = 498),
            make(code = "ME", codeIso3116Alpha3 = "MNE", numericCode = 499),
            make(code = "MF", codeIso3116Alpha3 = "MAF", numericCode = 663),
            make(code = "MG", codeIso3116Alpha3 = "MDG", numericCode = 450),
            make(code = "MH", codeIso3116Alpha3 = "MHL", numericCode = 584),
            make(code = "MK", codeIso3116Alpha3 = "MKD", numericCode = 807),
            make(code = "ML", codeIso3116Alpha3 = "MLI", numericCode = 466),
            make(code = "MM", codeIso3116Alpha3 = "MMR", numericCode = 104),
            make(code = "MN", codeIso3116Alpha3 = "MNG", numericCode = 496),
            make(code = "MO", codeIso3116Alpha3 = "MAC", numericCode = 446),
            make(code = "MP", codeIso3116Alpha3 = "MNP", numericCode = 580),
            make(code = "MQ", codeIso3116Alpha3 = "MTQ", numericCode = 474),
            make(code = "MR", codeIso3116Alpha3 = "MRT", numericCode = 478),
            make(code = "MS", codeIso3116Alpha3 = "MSR", numericCode = 500),
            make(code = "MT", codeIso3116Alpha3 = "MLT", numericCode = 470),
            make(code = "MU", codeIso3116Alpha3 = "MUS", numericCode = 480),
            make(code = "MV", codeIso3116Alpha3 = "MDV", numericCode = 462),
            make(code = "MW", codeIso3116Alpha3 = "MWI", numericCode = 454),
            make(code = "MX", codeIso3116Alpha3 = "MEX", numericCode = 484),
            make(code = "MY", codeIso3116Alpha3 = "MYS", numericCode = 458),
            make(code = "MZ", codeIso3116Alpha3 = "MOZ", numericCode = 508),
            make(code = "NA", codeIso3116Alpha3 = "NAM", numericCode = 516),
            make(code = "NC", codeIso3116Alpha3 = "NCL", numericCode = 540),
            make(code = "NE", codeIso3116Alpha3 = "NER", numericCode = 562),
            make(code = "NF", codeIso3116Alpha3 = "NFK", numericCode = 574),
            make(code = "NG", codeIso3116Alpha3 = "NGA", numericCode = 566),
            make(code = "NI", codeIso3116Alpha3 = "NIC", numericCode = 558),
            make(code = "NL", codeIso3116Alpha3 = "NLD", numericCode = 528),
            make(code = "NO", codeIso3116Alpha3 = "NOR", numericCode = 578),
            make(code = "NP", codeIso3116Alpha3 = "NPL", numericCode = 524),
            make(code = "NR", codeIso3116Alpha3 = "NRU", numericCode = 520),
            make(code = "NU", codeIso3116Alpha3 = "NIU", numericCode = 570),
            make(code = "NZ", codeIso3116Alpha3 = "NZL", numericCode = 554),
            make(code = "OM", codeIso3116Alpha3 = "OMN", numericCode = 512),
            make(code = "PA", codeIso3116Alpha3 = "PAN", numericCode = 591),
            make(code = "PE", codeIso3116Alpha3 = "PER", numericCode = 604),
            make(code = "PF", codeIso3116Alpha3 = "PYF", numericCode = 258),
            make(code = "PG", codeIso3116Alpha3 = "PNG", numericCode = 598),
            make(code = "PH", codeIso3116Alpha3 = "PHL", numericCode = 608),
            make(code = "PK", codeIso3116Alpha3 = "PAK", numericCode = 586),
            make(code = "PL", codeIso3116Alpha3 = "POL", numericCode = 616),
            make(code = "PM", codeIso3116Alpha3 = "SPM", numericCode = 666),
            make(code = "PN", codeIso3116Alpha3 = "PCN", numericCode = 612),
            make(code = "PR", codeIso3116Alpha3 = "PRI", numericCode = 630),
            make(code = "PS", codeIso3116Alpha3 = "PSE", numericCode = 275),
            make(code = "PT", codeIso3116Alpha3 = "PRT", numericCode = 620),
            make(code = "PW", codeIso3116Alpha3 = "PLW", numericCode = 585),
            make(code = "PY", codeIso3116Alpha3 = "PRY", numericCode = 600),
            make(code = "QA", codeIso3116Alpha3 = "QAT", numericCode = 634),
            make(code = "RE", codeIso3116Alpha3 = "REU", numericCode = 638),
            make(code = "RO", codeIso3116Alpha3 = "ROU", numericCode = 642),
            make(code = "RS", codeIso3116Alpha3 = "SRB", numericCode = 688),
            make(code = "RU", codeIso3116Alpha3 = "RUS", numericCode = 643),
            make(code = "RW", codeIso3116Alpha3 = "RWA", numericCode = 646),
            make(code = "SA", codeIso3116Alpha3 = "SAU", numericCode = 682),
            make(code = "SB", codeIso3116Alpha3 = "SLB", numericCode = 90),
            make(code = "SC", codeIso3116Alpha3 = "SYC", numericCode = 690),
            make(code = "SD", codeIso3116Alpha3 = "SDN", numericCode = 729),
            make(code = "SE", codeIso3116Alpha3 = "SWE", numericCode = 752),
            make(code = "SG", codeIso3116Alpha3 = "SGP", numericCode = 702),
            make(code = "SH", codeIso3116Alpha3 = "SHN", numericCode = 654),
            make(code = "SI", codeIso3116Alpha3 = "SVN", numericCode = 705),
            make(code = "SJ", codeIso3116Alpha3 = "SJM", numericCode = 744),
            make(code = "SK", codeIso3116Alpha3 = "SVK", numericCode = 703),
            make(code = "SL", codeIso3116Alpha3 = "SLE", numericCode = 694),
            make(code = "SM", codeIso3116Alpha3 = "SMR", numericCode = 674),
            make(code = "SN", codeIso3116Alpha3 = "SEN", numericCode = 686),
            make(code = "SO", codeIso3116Alpha3 = "SOM", numericCode = 706),
            make(code = "SR", codeIso3116Alpha3 = "SUR", numericCode = 740),
            make(code = "SS", codeIso3116Alpha3 = "SSD", numericCode = 728),
            make(code = "ST", codeIso3116Alpha3 = "STP", numericCode = 678),
            make(code = "SV", codeIso3116Alpha3 = "SLV", numericCode = 222),
            make(code = "SX", codeIso3116Alpha3 = "SXM", numericCode = 534),
            make(code = "SY", codeIso3116Alpha3 = "SYR", numericCode = 760),
            make(code = "SZ", codeIso3116Alpha3 = "SWZ", numericCode = 748),
            make(code = "TC", codeIso3116Alpha3 = "TCA", numericCode = 796),
            make(code = "TD", codeIso3116Alpha3 = "TCD", numericCode = 148),
            make(code = "TF", codeIso3116Alpha3 = "ATF", numericCode = 260),
            make(code = "TG", codeIso3116Alpha3 = "TGO", numericCode = 768),
            make(code = "TH", codeIso3116Alpha3 = "THA", numericCode = 764),
            make(code = "TJ", codeIso3116Alpha3 = "TJK", numericCode = 762),
            make(code = "TK", codeIso3116Alpha3 = "TKL", numericCode = 772),
            make(code = "TL", codeIso3116Alpha3 = "TLS", numericCode = 626),
            make(code = "TM", codeIso3116Alpha3 = "TKM", numericCode = 795),
            make(code = "TN", codeIso3116Alpha3 = "TUN", numericCode = 788),
            make(code = "TO", codeIso3116Alpha3 = "TON", numericCode = 776),
            make(code = "TR", codeIso3116Alpha3 = "TUR", numericCode = 792),
            make(code = "TT", codeIso3116Alpha3 = "TTO", numericCode = 780),
            make(code = "TV", codeIso3116Alpha3 = "TUV", numericCode = 798),
            make(code = "TW", codeIso3116Alpha3 = "TWN", numericCode = 158),
            make(code = "TZ", codeIso3116Alpha3 = "TZA", numericCode = 834),
            make(code = "UA", codeIso3116Alpha3 = "UKR", numericCode = 804),
            make(code = "UG", codeIso3116Alpha3 = "UGA", numericCode = 800),
            make(code = "UM", codeIso3116Alpha3 = "UMI", numericCode = 581),
            make(code = "US", codeIso3116Alpha3 = "USA", numericCode = 840),
            make(code = "UY", codeIso3116Alpha3 = "URY", numericCode = 858),
            make(code = "UZ", codeIso3116Alpha3 = "UZB", numericCode = 860),
            make(code = "VA", codeIso3116Alpha3 = "VAT", numericCode = 336),
            make(code = "VC", codeIso3116Alpha3 = "VCT", numericCode = 670),
            make(code = "VE", codeIso3116Alpha3 = "VEN", numericCode = 862),
            make(code = "VG", codeIso3116Alpha3 = "VGB", numericCode = 92),
            make(code = "VI", codeIso3116Alpha3 = "VIR", numericCode = 850),
            make(code = "VN", codeIso3116Alpha3 = "VNM", numericCode = 704),
            make(code = "VU", codeIso3116Alpha3 = "VUT", numericCode = 548),
            make(code = "WF", codeIso3116Alpha3 = "WLF", numericCode = 876),
            make(code = "WS", codeIso3116Alpha3 = "WSM", numericCode = 882),
            make(code = "YE", codeIso3116Alpha3 = "YEM", numericCode = 887),
            make(code = "YT", codeIso3116Alpha3 = "MYT", numericCode = 175),
            make(code = "ZA", codeIso3116Alpha3 = "ZAF", numericCode = 710),
            make(code = "ZM", codeIso3116Alpha3 = "ZMB", numericCode = 894),
            make(code = "ZW", codeIso3116Alpha3 = "ZWE", numericCode = 716),
        )

        private val allByCode: Map<CountryCode, Country> = all.associateByTo(hashMapOf()) { it.code }

        private fun make(code: String, codeIso3116Alpha3: String, numericCode: Int): Country =
            Country(
                code = CountryCode(code),
                codeIso3116Alpha3 = codeIso3116Alpha3,
                numericCode = numericCode,
            )

        public fun forCode(code: CountryCode): Country =
            forCodeOrNull(code) ?: error("Invalid ISO 3166-1 alpha-2 country code: $code")

        public fun forCodeOrNull(code: CountryCode): Country? =
            allByCode[code]

        public fun forCode(code: String): Country =
            forCodeOrNull(CountryCode.parse(code)) ?: error("Invalid ISO 3166-1 alpha-2 country code: $code")

        public fun forCodeOrNull(code: String): Country? =
            CountryCode.parseOrNull(code)?.let(::forCodeOrNull)
    }
}

public fun String.toCountry(): Country = Country.forCode(this)

public fun String.toCountryOrNull(): Country? = Country.forCodeOrNull(this)
