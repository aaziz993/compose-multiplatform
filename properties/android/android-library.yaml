imports:
  - android-library-plugin.yaml
config:
  imports:
    - org.jetbrains.kotlin.gradle.plugin.mpp.KotlinAndroidTarget
    - com.android.build.api.dsl.androidLibrary
script:
  - kotlin:
      androidLibrary: |
        {
          namespace = moduleName
          compileSdk = libs.versions("android.compileSdk")!!.requiredVersion.toInt()  
          minSdk = libs.versions("android.minSdk")!!.requiredVersion.toInt()
          
          withJava() // enable java compilation support
          // Enable Android resource processing
          androidResources {
            enable = true
          }
        
          withHostTestBuilder {}.configure {
            isIncludeAndroidResources = true
          }
        
          withDeviceTestBuilder {
            sourceSetTreeName = "test"
          }.configure {
            instrumentationRunner = "androidx.test.runner.AndroidJUnitRunner"
            execution = "ANDROIDX_TEST_ORCHESTRATOR"
          }

          // Configure the JVM target for both Kotlin and Java sources
          compilerOptions {
            jvmTarget.set(org.jetbrains.kotlin.gradle.dsl.JvmTarget.JVM_1_8)
          }
        }
      targets:
        - withType<KotlinAndroidTarget>: |
            {
              publishLibraryVariants(
                 "demoRelease",
              )
            }