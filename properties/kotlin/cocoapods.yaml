config:
  imports:
    - org.jetbrains.kotlin.gradle.plugin.mpp.NativeBuildType
script:
  - plugins:
      - id: (libs.plugins("cocoapods").pluginId)
  - kotlin:
      cocoapods:
        version: libs.versions("kotlin.cocoapods.version").requiredVersion
        summary: projectScript.description
        homepage: settings.settingsScript.remote.url
        license: settings.settingsScript.license.name
        name: moduleName
        podfile: file("../iosApp/Podfile")
        framework: |
          {
            // Required properties
            // Framework name configuration. Use this property instead of deprecated 'frameworkName'
            baseName = moduleName

            // Optional properties
            // Specify the framework linking type. It's dynamic by default.
            isStatic = true
            // Dependency export
            // Uncomment and specify another project module if you have one:
            // export(project(":<your other KMP module>"))
            transitiveExport = false // This is default.
          }
        xcodeConfigurationToNativeBuildType.putAll: |
          (mapOf(
            "CUSTOM_DEBUG" to NativeBuildType.DEBUG,
            "CUSTOM_RELEASE" to NativeBuildType.RELEASE,
          ))
        ios:
          deploymentTarget: libs.versions("kotlin.cocoapods.ios.deploymentTarget").requiredVersion
        osx:
          deploymentTarget: libs.versions("kotlin.cocoapods.osx.deploymentTarget").requiredVersion
        tvos:
          deploymentTarget: libs.versions("kotlin.cocoapods.tvos.deploymentTarget").requiredVersion
        watchos:
          deploymentTarget: libs.versions("kotlin.cocoapods.watchos.deploymentTarget").requiredVersion
