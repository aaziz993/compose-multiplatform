config:
  imports:
    - org.jetbrains.kotlin.gradle.plugin.mpp.NativeBuildType
script:
  - plugins:
      - id: (libs.plugins("cocoapods").pluginId)
  - kotlin:
      cocoapods:
        version: libs.versions("kotlin.cocoapods.version").requiredVersion
        summary: description
        homepage: settings.settingsProperties.remote.url
        name: moduleName
        framework: |
          {
            // Required properties
            // Framework name configuration. Use this property instead of deprecated 'frameworkName'
            baseName = moduleName

            // Optional properties
            // Specify the framework linking type. It's dynamic by default.
            isStatic = false
            // Dependency export
            // Uncomment and specify another project module if you have one:
            // export(project(":<your other KMP module>"))
            transitiveExport = false // This is default.
          }
        xcodeConfigurationToNativeBuildType.putAll: |
          (mapOf(
            "CUSTOM_DEBUG" to NativeBuildType.DEBUG,
            "CUSTOM_RELEASE" to NativeBuildType.RELEASE,
          ))
        ios:
          deploymentTarget: libs.versions("kotlin.cocoapods.ios.deploymentTarget").requiredVersion
        osx:
          deploymentTarget: libs.versions("kotlin.cocoapods.osx.deploymentTarget").requiredVersion
        tvos:
          deploymentTarget: libs.versions("kotlin.cocoapods.tvos.deploymentTarget").requiredVersion
        watchos:
          deploymentTarget: libs.versions("kotlin.cocoapods.watchos.deploymentTarget").requiredVersion
