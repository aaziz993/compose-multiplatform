config:
  imports:
    - org.jetbrains.kotlin.gradle.plugin.mpp.NativeBuildType
script:
  - plugins:
      - id: (libs.plugins("cocoapods").pluginId)
  - kotlin:
      cocoapods:
        - name: moduleName
        - version: version.toString()
        - homepage: '"${settings.settingsScript.remote.url}/${project.projectDir.relativeTo(rootProject.projectDir)}"'
        - authors: settings.settingsScript.developer.name
        - license: |
            "{  :type => '${settings.settingsScript.license.name}', :url => '${settings.settingsScript.license.url}' }"
        - summary: description.orEmpty()
        - xcodeConfigurationToNativeBuildType.putAll: |
            (mapOf(
              "CUSTOM_DEBUG" to NativeBuildType.DEBUG,
              "CUSTOM_RELEASE" to NativeBuildType.RELEASE,
            ))
        - ios:
            deploymentTarget: libs.versions("kotlin.cocoapods.ios.deploymentTarget").requiredVersion
        - osx:
            deploymentTarget: libs.versions("kotlin.cocoapods.osx.deploymentTarget").requiredVersion
        - tvos:
            deploymentTarget: libs.versions("kotlin.cocoapods.tvos.deploymentTarget").requiredVersion
        - watchos:
            deploymentTarget: libs.versions("kotlin.cocoapods.watchos.deploymentTarget").requiredVersion
