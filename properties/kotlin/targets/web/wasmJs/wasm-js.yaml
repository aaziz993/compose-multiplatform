config:
  imports:
    - org.jetbrains.kotlin.gradle.ExperimentalWasmDsl
    - org.jetbrains.kotlin.gradle.targets.js.webpack.KotlinWebpackConfig
    - org.jetbrains.kotlin.gradle.targets.js.dsl.KotlinWasmJsTargetDsl
script:
  - '@file:OptIn': (ExperimentalWasmDsl::class)
  - kotlin:
      wasmJs: |
        {
          compilerOptions {
            freeCompilerArgs.addAll(
              // With the compiler option enabled, an IndexOutOfBoundsException is thrown instead of a trap.
              "-Xwasm-enable-array-range-checks",
            )
          }
          browser()
          nodejs()
        }
