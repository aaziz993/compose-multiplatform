config:
  imports:
    - org.jetbrains.kotlin.gradle.targets.js.dsl.KotlinJsTargetDsl
script:
  - plugins:
      - id: (libs.plugins("seskar").pluginId)
  - kotlin:
      js: |
        (kotlin.IR) {
          browser()
          nodejs {
            testTask { testTask ->
              testTask.useMocha {
                timeout = "10s"
              }
            }
          }
        }
      targets:
        - withType: |
            <KotlinJsTargetDsl> {
              compilerOptions {
                optIn.addAll(
                  "kotlin.js.ExperimentalJsExport",
                )
              }
            }
      sourceSets:
        - named: |
            ("jsMain") { sourceSet ->
              sourceSet.dependencies {
                implementation(libs["seskar"])
                implementation(libs("kotlinWrappers")["js"])
                implementation(libs["worldwind"])
                implementation(libs("ktor")["client.js"])
              }
            }
