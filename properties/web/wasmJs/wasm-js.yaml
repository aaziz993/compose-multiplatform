config:
  imports:
    - org.jetbrains.kotlin.gradle.ExperimentalWasmDsl
    - org.jetbrains.kotlin.gradle.targets.js.webpack.KotlinWebpackConfig
    - org.jetbrains.kotlin.gradle.targets.js.dsl.KotlinWasmJsTargetDsl
script:
  - '@file:OptIn': (ExperimentalWasmDsl::class)
  - kotlin:
      wasmJs: |
        {
          browser()
          nodejs()
        }
      targets:
        - withType<KotlinWasmJsTargetDsl>: |
            {
              compilerOptions {
                freeCompilerArgs.addAll(listOf(
                  "-Xpartial-linkage-loglevel=ERROR",
                ))
              }
            }
