group: io.github.aaziz993

aliases:
  - jvmAndAndroid: [ jvm, android ]
  - nonJvm: [ android, iosArm64 , iosX64, iosSimulatorArm64, js, wasm ]
  - nonAndroid: [ jvm, iosArm64, iosX64, iosSimulatorArm64, js, wasm ]
  - mobile: [ android, iosArm64, iosX64, iosSimulatorArm64 ]
  - nonMobile: [ jvm, js, wasm ]
  - web: [ js, wasm ]
  - nonWeb: [ jvm, android, iosArm64, iosX64, iosSimulatorArm64 ]

dependencies:
  - $libs.kotlinx.serialization.json
  - $libs.kotlinx.serialization.properties

dependencies@nonWeb:
  - $libs.androidx.room.runtime.ktx


dependencies@android:
  - $libs.androidx.room.runtime.android
  - $libs.androidx.room.paging

settings:
  gradle:
    # Print suggestions for your build as you run regular tasks.
    doctor:
      enabled: true
      enableTaskMonitoring: true
      enableTestCaching: true
      javaHome:
        ensureJavaHomeIsSet: false
        ensureJavaHomeMatches: false

    # Generating BuildConstants for any kind of Gradle projects: Java, Kotlin, Android, Groovy, etc. Designed for KTS scripts, with experimental support for Kotlin's multi-platform plugin
    buildConfig:
      enabled: true

    # Can format <antlr | c | c# | c++ | css | flow | graphql | groovy | html | java | javascript | json | jsx | kotlin | less | license headers | markdown | objective-c | protobuf | python | scala | scss | shell | sql | typeScript | vue | yaml | anything> using <gradle | maven | sbt | anything>.
    spotless:
      enabled: true
      kotlinGradle:
        ktlint:
          editorConfigPath: ../.editorconfig

    # Set of solutions for collecting test coverage of Kotlin code compiled for JVM and Android platforms.
    kover:
      enabled: true
      useJacoco: true
      reports:
        total:
          html:
            title: Generate coverage report
            htmlDir: build/reports/kover
            onCheck: true
            charset: UTF8
          xml:
            xmlFile: build/reports/kover/report.xml
            onCheck: true

    # Help developers deliver high-quality, efficient code standards that benefit the entire team or organization.
    sonar:
      enabled: true
      properties:
        sonar.host.url: https://sonarcloud.io
        sonar.organization: aaziz993
        sonar.projectKey: aaziz993_compose-multiplatform
        sonar.coverage.jacoco.xmlReportPaths: build/reports/kover/report.xml
        sonar.androidLint.reportPaths: build/reports/lint-results.xml

    # api documentation engine for Kotlin.
    dokka:
      enabled: true
      sourceSets: [ Module.md ]

    # allows dumping binary API of a JVM part of a Kotlin library that is public in the sense of Kotlin visibilities and ensures that the public binary API wasn't changed in a way that makes this change binary incompatible.
    apiValidation:
      enabled: true
      apiDumpDirectory: api-validation
      klib:
        enabled: true
        strictValidation: true

  kotlin:
    #    apiVersion: 2.1.10
    #    languageVersion: 2.1.10
    allWarningsAsErrors: false
    debug: false
    progressiveMode: true
    suppressWarnings: false
    verbose: true
    languageFeatures:
      - contextReceivers
    freeCompilerArgs:
      - -Xexplicit-api=strict
      - -Xcontext-receivers
      - -Xexpect-actual-classes
      - -Xinline-classes
      - -Xbinary=bundleId=io.github.aaziz993.compose-multiplatform # set ios bundleId
    optIns: [ kotlin.io.path.ExperimentalPathApi ]
    linkerOpts:
      - "-lsqlite3" # for ios

    # api that you can use to develop lightweight compiler plugins. KSP provides a simplified compiler plugin API that leverages the power of Kotlin while keeping the learning curve at a minimum. Compared to KAPT, annotation processors that use KSP can run up to 2x faster.
    ksp2:
      enabled: true
      useKsp2: true
      processors:
        - $libs.arrow.optics.ksp.plugin
        - $libs.androidx.room.compiler
        - $libs.ktorfit.ksp
        # Use import org.koin.ksp.generated.*
        - $libs.koin.ksp.compiler

    # adapts Kotlin to the requirements of those frameworks and makes classes annotated with a specific annotation and their members open
    allOpen:
      enabled: true
      myAnnotations:
        - javax.ws.rs.Path
        - javax.enterprise.context.ApplicationScoped
        - javax.persistence.Entity
        - data.type.annotation.AllOpen

    # generates an additional zero-argument constructor for classes with a specific annotation.
    noArg:
      myAnnotations:
        - data.type.annotation.NoArg

    serialization:
      enabled: true
      version: 1.8.0

    # multiplatform library that provides the idiomatic and efficient way of using atomic operations in Kotlin.
    atomicFU:
      enabled: true

    # generates typesafe Kotlin APIs from your SQL statements. It verifies your schema, statements, and migrations at compile-time and provides IDE features like autocomplete and refactoring which make writing and maintaining SQL simple.
    sqldelight:
      enabled: true

    # abstraction layer over SQLite to allow for more robust database access while harnessing the full power of SQLite.
    room:
      enabled: true
      schemaDirectories:
        - schemas

    # kotlin library for adding asynchronous Remote Procedure Call (RPC) services to your applications. Build your RPC with already known language constructs and nothing more!
    rpc:
      enabled: true
      annotationTypeSafetyEnabled: true

    # http client/Kotlin Symbol Processor for Kotlin Multiplatform ( Android, iOS, Js, Jvm, Linux) using KSP and Ktor clients inspired by Retrofit
    ktorfit:
      enabled: true
      generateQualifiedTypeName: true

    # strongly typed GraphQL client that generates Kotlin models for your GraphQL operations.
    apollo:
      enabled: true
      generateSourcesDuringGradleSync: true

    # providing detailed failure messages with contextual information during testing.
    powerAssert:
      enabled: true
      functions:
        - kotlin.assert
        - kotlin.test.assertTrue
        - kotlin.test.assertEquals
        - kotlin.test.assertNull
        - kotlin.test.assertFails
        - kotlin.test.assertFailsWith

      includedSourceSets:
        - commonMain
        - jvm
        - androidMain
        - ios
        - js
        - wasm

  jvm:
    release: 23

test-settings@jvm:
  junit: junit-5

test-settings@android:
  junit: junit-5
