config:
  imports:
    - io.ktor.server.plugins.callid.CallId
    - java.util.UUID
script:
  - module: |
      {
        install(CallId) {
          header("X-Request-ID")
          generate { UUID.randomUUID().toString() }
          verify(String::isNotEmpty)
        }

        routing {
          get("/callId") {
            call.respondText(call.callId.orEmpty())
          }
        }
      }
